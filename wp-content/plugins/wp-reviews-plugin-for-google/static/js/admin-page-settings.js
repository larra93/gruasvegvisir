jQuery(document).ready(function(){Trustindex_Autocomplete.check=function(){let value=jQuery("#trustindex-plugin-settings-page #page-link").val().trim();if(Trustindex_Autocomplete.searching){return false}if(value.substr(0,4)=="www."||value.substr(0,7)=="http://"||value.substr(0,8)=="https://"){if(!/^(www\.|https?:\/\/)(www\.)?google\.[^\/]+\/(search|maps)/gm.test(value)){Trustindex_Autocomplete.box.html('<span class="error">'+Trustindex_Autocomplete.box.data("errortext-search")+"</span>");Trustindex_Autocomplete.box.show();return false}Trustindex_Autocomplete.box.hide();Trustindex_Autocomplete.load.show();Trustindex_Autocomplete.searching=true;let cache_term=value;if(Trustindex_Autocomplete.cache[cache_term]!==undefined){setTimeout(function(){Trustindex_Autocomplete.showResult(Trustindex_Autocomplete.cache[cache_term],"errortext-search")},400);return}jQuery.ajax({method:"POST",url:"https://admin.trustindex.io/api/findPlaceId",data:{url:value},dataType:"jsonp",success:function(a){Trustindex_Autocomplete.cache[cache_term]=a;Trustindex_Autocomplete.showResult(a,"errortext-search")}})}else{if(!/([A-Z][a-zA-Z0-9_-]+)/gm.test(value)){Trustindex_Autocomplete.box.html('<span class="error">'+Trustindex_Autocomplete.box.data("errortext")+"</span>");Trustindex_Autocomplete.box.show();return false}Trustindex_Autocomplete.box.hide();Trustindex_Autocomplete.load.show();Trustindex_Autocomplete.searching=true;let cache_term=value;if(Trustindex_Autocomplete.cache[cache_term]!==undefined){setTimeout(function(){Trustindex_Autocomplete.showResult(Trustindex_Autocomplete.cache[cache_term])},400);return}jQuery.ajax({method:"POST",url:"https://admin.trustindex.io/api/getPageDetails",data:{platform:"google",page_id:value},dataType:"jsonp",success:function(a){Trustindex_Autocomplete.cache[cache_term]=a;Trustindex_Autocomplete.showResult(a)}})}}});